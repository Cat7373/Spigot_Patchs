From 21ecafb305f4ec4548c6261e29c343000738dafc Mon Sep 17 00:00:00 2001
From: Cat73 <root@cat73.org>
Date: Wed, 7 Aug 2019 08:40:08 +0800
Subject: [PATCH] Cat73 -> Remove Debug checks from DataBits
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

去掉热点方法(getType)中的边界检查
这个边界检查如果失败会导致服务器直接崩溃，然而从来没遇到过因为这个检查导致的崩溃，因此这个检查应该没啥卵用

Link: https://github.com/PaperMC/Paper/blob/b6c32b2a159aa9adf982d4cdf5aada6c5d65396b/Spigot-Server-Patches/0086-Remove-Debug-checks-from-DataBits.patch

diff --git a/src/main/java/net/minecraft/server/DataBits.java b/src/main/java/net/minecraft/server/DataBits.java
index 91ebd474a..a33749fc6 100644
--- a/src/main/java/net/minecraft/server/DataBits.java
+++ b/src/main/java/net/minecraft/server/DataBits.java
@@ -1,7 +1,7 @@
 package net.minecraft.server;
 
 import java.util.function.IntConsumer;
-import org.apache.commons.lang3.Validate;
+// import org.apache.commons.lang3.Validate; // Paper
 
 public class DataBits {
 
@@ -15,7 +15,7 @@ public class DataBits {
     }
 
     public DataBits(int i, int j, long[] along) {
-        Validate.inclusiveBetween(1L, 32L, (long) i);
+        // Validate.inclusiveBetween(1L, 32L, (long) i); // Paper
         this.d = j;
         this.b = i;
         this.a = along;
@@ -28,8 +28,8 @@ public class DataBits {
     }
 
     public int a(int i, int j) {
-        Validate.inclusiveBetween(0L, (long) (this.d - 1), (long) i);
-        Validate.inclusiveBetween(0L, this.c, (long) j);
+        // Validate.inclusiveBetween(0L, (long) (this.d - 1), (long) i); // Paper
+        // Validate.inclusiveBetween(0L, this.c, (long) j); // Paper
         int k = i * this.b;
         int l = k >> 6;
         int i1 = (i + 1) * this.b - 1 >> 6;
@@ -50,8 +50,8 @@ public class DataBits {
     }
 
     public void b(int i, int j) {
-        Validate.inclusiveBetween(0L, (long) (this.d - 1), (long) i);
-        Validate.inclusiveBetween(0L, this.c, (long) j);
+        // Validate.inclusiveBetween(0L, (long) (this.d - 1), (long) i); // Paper
+        // Validate.inclusiveBetween(0L, this.c, (long) j); // Paper
         int k = i * this.b;
         int l = k >> 6;
         int i1 = (i + 1) * this.b - 1 >> 6;
@@ -68,7 +68,7 @@ public class DataBits {
     }
 
     public int a(int i) {
-        Validate.inclusiveBetween(0L, (long) (this.d - 1), (long) i);
+        // Validate.inclusiveBetween(0L, (long) (this.d - 1), (long) i); // Paper
         int j = i * this.b;
         int k = j >> 6;
         int l = (i + 1) * this.b - 1 >> 6;
-- 
2.22.0

