From 8f08f6227aab96b2212083c5a40eb7c7fde6372a Mon Sep 17 00:00:00 2001
From: Cat73 <root@cat73.org>
Date: Wed, 26 Feb 2020 00:04:13 +0800
Subject: [PATCH] Cat73 -> API to get a BlockState without a snapshot
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

增加无需创建快照就可以获取 BlockState 的 API

Link: https://github.com/PaperMC/Paper/blob/19de9af63c98137a8bbfe9b0550bb30c3d6da7df/Spigot-API-Patches/0072-API-to-get-a-BlockState-without-a-snapshot.patch

diff --git a/src/main/java/org/bukkit/block/Block.java b/src/main/java/org/bukkit/block/Block.java
index ab6750c7..af4ffada 100644
--- a/src/main/java/org/bukkit/block/Block.java
+++ b/src/main/java/org/bukkit/block/Block.java
@@ -268,6 +268,16 @@ public interface Block extends Metadatable {
     @NotNull
     BlockState getState();
 
+    // Paper start
+    /**
+     * @see #getState() optionally disables use of snapshot, to operate on real block data
+     * @param useSnapshot if this block is a TE, should we create a fully copy of the TileEntity
+     * @return BlockState with the current state of this block
+     */
+    @NotNull
+    BlockState getState(boolean useSnapshot);
+    // Paper end
+
     /**
      * Returns the biome that this block resides in
      *
-- 
2.25.0

